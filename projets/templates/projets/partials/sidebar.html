<!-- Sidebar pour version desktop -->
<div class="hidden md:flex md:flex-shrink-0">
  <div class="flex flex-col w-64 border-r border-gray-700 bg-gray-800">
    <!-- Logo réduit -->
    <div class="flex items-center h-16 flex-shrink-0 px-4 bg-gray-900">
      <a href="{% url 'home' %}" class="flex items-center">
        <i class="fas fa-building text-indigo-400 text-xl mr-2"></i>
        <span class="text-white font-semibold">MEGA</span>
      </a>
    </div>
    
    <div class="flex-1 flex flex-col overflow-y-auto">
      <!-- Navigation principale -->
      <nav class="flex-1 px-2 py-4 space-y-1">
        <!-- Tableau de bord -->
        <a href="{% url 'home' %}" 
           class="{% if request.resolver_match.url_name == 'accueil' %}bg-gray-900 text-white{% else %}text-gray-300 hover:bg-gray-700 hover:text-white{% endif %} group flex items-center px-2 py-2 text-sm font-medium rounded-md">
          <i class="fas fa-tachometer-alt mr-3 text-gray-400 group-hover:text-gray-300 {% if request.resolver_match.url_name == 'accueil' %}text-indigo-400{% endif %}"></i>
          Tableau de bord
        </a>
        
        <!-- Projets -->
        <a href="{% url 'projets:liste_projets' %}" 
           class="{% if 'projets' in request.resolver_match.url_name %}bg-gray-900 text-white{% else %}text-gray-300 hover:bg-gray-700 hover:text-white{% endif %} group flex items-center px-2 py-2 text-sm font-medium rounded-md">
          <i class="fas fa-project-diagram mr-3 text-gray-400 group-hover:text-gray-300 {% if 'projets' in request.resolver_match.url_name %}text-indigo-400{% endif %}"></i>
          Projets
          <span class="ml-auto inline-block py-0.5 px-3 text-xs rounded-full bg-gray-700 text-gray-300">
            {{ projets_count|default:"0" }}
          </span>
        </a>
        
        <!-- Calendrier -->
        <a href="{% url 'projets:calendrier' %}" 
           class="{% if request.resolver_match.url_name == 'calendrier' %}bg-gray-900 text-white{% else %}text-gray-300 hover:bg-gray-700 hover:text-white{% endif %} group flex items-center px-2 py-2 text-sm font-medium rounded-md">
          <i class="fas fa-calendar-alt mr-3 text-gray-400 group-hover:text-gray-300 {% if request.resolver_match.url_name == 'calendrier' %}text-indigo-400{% endif %}"></i>
          Calendrier
        </a>
        
        <!-- Documents -->
        <a href="{% url 'projets:documents' %}" 
           class="{% if request.resolver_match.url_name == 'documents' %}bg-gray-900 text-white{% else %}text-gray-300 hover:bg-gray-700 hover:text-white{% endif %} group flex items-center px-2 py-2 text-sm font-medium rounded-md">
          <i class="fas fa-folder mr-3 text-gray-400 group-hover:text-gray-300 {% if request.resolver_match.url_name == 'documents' %}text-indigo-400{% endif %}"></i>
          Documents
        </a>
      </nav>
      
      <!-- Section secondaire -->
      <div class="border-t border-gray-700 pt-4 pb-4">
        <nav class="px-2 space-y-1">
          <!-- Paramètres -->
          <a href="{% url 'projets:parametres' %}" 
             class="{% if request.resolver_match.url_name == 'parametres' %}bg-gray-900 text-white{% else %}text-gray-300 hover:bg-gray-700 hover:text-white{% endif %} group flex items-center px-2 py-2 text-sm font-medium rounded-md">
            <i class="fas fa-cog mr-3 text-gray-400 group-hover:text-gray-300 {% if request.resolver_match.url_name == 'parametres' %}text-indigo-400{% endif %}"></i>
            Paramètres
          </a>
          
          <!-- Aide -->
          <a href="{% url 'projets:aide' %}" 
             class="{% if request.resolver_match.url_name == 'aide' %}bg-gray-900 text-white{% else %}text-gray-300 hover:bg-gray-700 hover:text-white{% endif %} group flex items-center px-2 py-2 text-sm font-medium rounded-md">
            <i class="fas fa-question-circle mr-3 text-gray-400 group-hover:text-gray-300 {% if request.resolver_match.url_name == 'aide' %}text-indigo-400{% endif %}"></i>
            Aide
          </a>
        </nav>
      </div>
      
      <!-- Mini-profil -->
      <div class="flex-shrink-0 flex border-t border-gray-700 p-4">
        <a href="{% url 'projets:profile' %}" class="flex-shrink-0 w-full group block">
          <div class="flex items-center">
            <div>
              <img class="inline-block h-9 w-9 rounded-full" src="{{ user.profile.avatar.url }}" alt="Photo de profil">
            </div>
            <div class="ml-3">
              <p class="text-sm font-medium text-white">{{ user.username }}</p>
              <p class="text-xs font-medium text-gray-400 group-hover:text-gray-300">Voir profil</p>
            </div>
          </div>
        </a>
      </div>
    </div>
  </div>
</div>

<!-- Version mobile (overlay) -->
<div id="mobileSidebar" class="fixed inset-0 flex z-40 md:hidden hidden">
  <div class="fixed inset-0 bg-gray-600 bg-opacity-75" onclick="closeMobileSidebar()"></div>
  <div class="relative flex-1 flex flex-col max-w-xs w-full bg-gray-800">
    <div class="absolute top-0 right-0 -mr-14 p-1">
      <button onclick="closeMobileSidebar()" class="flex items-center justify-center h-12 w-12 rounded-full focus:outline-none focus:bg-gray-600">
        <i class="fas fa-times text-white text-xl"></i>
      </button>
    </div>
    <div class="flex-1 h-0 pt-5 pb-4 overflow-y-auto">
      <!-- Contenu identique à la version desktop mais adapté -->
      <!-- ... -->
    </div>
  </div>
</div>

<script>
// Gestion du sidebar mobile
function openMobileSidebar() {
  document.getElementById('mobileSidebar').classList.remove('hidden');
}

function closeMobileSidebar() {
  document.getElementById('mobileSidebar').classList.add('hidden');
}

// Intégration avec le navbar
document.addEventListener('DOMContentLoaded', function() {
  // Ajoutez un bouton dans votre navbar mobile pour ouvrir le sidebar
  const mobileMenuBtn = document.createElement('button');
  mobileMenuBtn.innerHTML = '<i class="fas fa-bars"></i>';
  mobileMenuBtn.className = 'mr-2 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none';
  mobileMenuBtn.onclick = openMobileSidebar;
  document.querySelector('#mobileMenuBtn').before(mobileMenuBtn);
});
</script>